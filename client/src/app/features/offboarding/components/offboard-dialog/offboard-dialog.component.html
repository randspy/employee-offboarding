<h2 mat-dialog-title>Offboard</h2>
<mat-dialog-content class="mat-typography">
  <form [formGroup]="form" class="offboard-dialog__form">
    <mat-form-field appearance="outline">
      <mat-label>Email</mat-label>
      <input
        matInput
        formControlName="email"
        type="email"
        placeholder="Enter email"
      />
      @if (hasError("email", "required")) {
        <mat-error>Email is required</mat-error>
      }
      @if (hasError("email", "email")) {
        <mat-error>Please enter a valid email address</mat-error>
      }
    </mat-form-field>

    <mat-form-field appearance="outline">
      <mat-label>Phone</mat-label>
      <input
        matInput
        formControlName="phone"
        placeholder="Enter phone number"
      />
      <mat-hint>Format: +48 XXX XXX XXX</mat-hint>
      @if (hasError("phone", "required")) {
        <mat-error>Phone number is required</mat-error>
      }
      @if (hasError("phone", "pattern")) {
        <mat-error>Please enter a valid Polish phone number</mat-error>
      }
    </mat-form-field>

    <div formGroupName="address">
      <mat-form-field appearance="outline">
        <mat-label>Receiver</mat-label>
        <input
          matInput
          formControlName="receiver"
          placeholder="Enter receiver name"
        />
        @if (hasError("address.receiver", "required")) {
          <mat-error>Receiver name is required</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Country</mat-label>
        <input matInput formControlName="country" placeholder="Enter country" />
        @if (hasError("address.country", "required")) {
          <mat-error>Country is required</mat-error>
        }
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Street</mat-label>
        <input
          matInput
          formControlName="streetLine1"
          placeholder="Enter street address"
        />
        @if (hasError("address.streetLine1", "required")) {
          <mat-error>Street address is required</mat-error>
        }
      </mat-form-field>

      <div class="offboard-dialog__city-group">
        <mat-form-field appearance="outline">
          <mat-label>City</mat-label>
          <input matInput formControlName="city" placeholder="Enter city" />
          @if (hasError("address.city", "required")) {
            <mat-error>City is required</mat-error>
          }
        </mat-form-field>

        <mat-form-field appearance="outline">
          <mat-label>Postal Code</mat-label>
          <input
            matInput
            formControlName="postalCode"
            placeholder="Enter postal code"
          />
          <mat-hint>Format: XX-XXX</mat-hint>
          @if (hasError("address.postalCode", "required")) {
            <mat-error>Postal code is required</mat-error>
          }
          @if (hasError("address.postalCode", "pattern")) {
            <mat-error
              >Please enter a valid Polish postal code (XX-XXX)</mat-error
            >
          }
        </mat-form-field>
      </div>
    </div>

    <mat-form-field appearance="outline">
      <mat-label>Notes</mat-label>
      <textarea
        matInput
        formControlName="notes"
        placeholder="Enter additional notes"
      ></textarea>
    </mat-form-field>
  </form>
</mat-dialog-content>

<mat-dialog-actions align="end">
  <button mat-button mat-dialog-close>Cancel</button>
  <button mat-button [mat-dialog-close]="form.value" [disabled]="!form.valid">
    Submit
  </button>
</mat-dialog-actions>
